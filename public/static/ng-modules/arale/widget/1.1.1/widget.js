define("arale/widget/1.1.1/widget",["arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","./daparser","./auto-render"],function(g,y,c){var h=g("arale/base/1.1.1/base");var r=g("./daparser");var k=g("./auto-render");var x=".delegate-events-";var o="_onRender";var j="data-widget-cid";var l={};var d=h.extend({propsInAttrs:["initElement","element","events"],element:null,events:null,attrs:{id:null,className:null,style:null,template:"<div></div>",model:null,parentNode:document.body},initialize:function(B){this.cid=n();var A=this._parseDataAttrsConfig(B);d.superclass.initialize.call(this,B?$.extend(A,B):A);this.parseElement();this.initProps();this.delegateEvents();this.setup();this._stamp();this._isTemplate=!(B&&B.element)},_parseDataAttrsConfig:function(B){var C,A;if(B){C=B.initElement?$(B.initElement):$(B.element)}if(C&&C[0]&&!k.isDataApiOff(C)){A=r.parseElement(C)}return A},parseElement:function(){var A=this.element;if(A){this.element=$(A)}else{if(this.get("template")){this.parseElementFromTemplate()}}if(!this.element||!this.element[0]){throw new Error("element is invalid")}},parseElementFromTemplate:function(){this.element=$(this.get("template"))},initProps:function(){},delegateEvents:function(F,E,G){if(arguments.length===0){E=z(this);F=this.element}else{if(arguments.length===1){E=F;F=this.element}else{if(arguments.length===2){G=E;E=F;F=this.element}else{F||(F=this.element);this._delegateElements||(this._delegateElements=[]);this._delegateElements.push($(F))}}}if(i(E)&&a(G)){var H={};H[E]=G;E=H}for(var D in E){if(!E.hasOwnProperty(D)){continue}var B=e(D,this);var C=B.type;var A=B.selector;(function(I,J){var K=function(L){if(a(I)){I.call(J,L)}else{J[I](L)}};if(A){$(F).on(C,A,K)}else{$(F).on(C,K)}})(E[D],this)}return this},undelegateEvents:function(C,B){if(!B){B=C;C=null}if(arguments.length===0){var D=x+this.cid;this.element&&this.element.off(D);if(this._delegateElements){for(var E in this._delegateElements){if(!this._delegateElements.hasOwnProperty(E)){continue}this._delegateElements[E].off(D)}}}else{var A=e(B,this);if(!C){this.element&&this.element.off(A.type,A.selector)}else{$(C).off(A.type,A.selector)}}return this},setup:function(){},render:function(){if(!this.rendered){this._renderAndBindAttrs();this.rendered=true}var A=this.get("parentNode");if(A&&!w(this.element[0])){var C=this.constructor.outerBoxClass;if(C){var B=this._outerBox=$("<div></div>").addClass(C);B.append(this.element).appendTo(A)}else{this.element.appendTo(A)}}return this},_renderAndBindAttrs:function(){var D=this;var C=D.attrs;for(var B in C){if(!C.hasOwnProperty(B)){continue}var A=o+t(B);if(this[A]){var E=this.get(B);if(!q(E)){this[A](E,undefined,B)}(function(F){D.on("change:"+B,function(I,H,G){D[F](I,H,G)})})(A)}}},_onRenderId:function(A){this.element.attr("id",A)},_onRenderClassName:function(A){this.element.addClass(A)},_onRenderStyle:function(A){this.element.css(A)},_stamp:function(){var A=this.cid;(this.initElement||this.element).attr(j,A);l[A]=this},$:function(A){return this.element.find(A)},destroy:function(){this.undelegateEvents();delete l[this.cid];if(this.element&&this._isTemplate){this.element.off();if(this._outerBox){this._outerBox.remove()}else{this.element.remove()}}this.element=null;d.superclass.destroy.call(this)}});$(window).unload(function(){for(var A in l){l[A].destroy()}});d.query=function(A){var B=$(A).eq(0);var C;B&&(C=B.attr(j));return l[C]};d.autoRender=k.autoRender;d.autoRenderAll=k.autoRenderAll;d.StaticsWhiteList=["autoRender"];c.exports=d;var m=Object.prototype.toString;var v=0;function n(){return"widget-"+v++}function i(A){return m.call(A)==="[object String]"}function a(A){return m.call(A)==="[object Function]"}var f=$.contains||function(B,A){return !!(B.compareDocumentPosition(A)&16)};function w(A){return f(document.documentElement,A)}function t(A){return A.charAt(0).toUpperCase()+A.substring(1)}var u=/^(\S+)\s*(.*)$/;var b=/{{([^}]+)}}/g;var p="INVALID_SELECTOR";function z(A){if(a(A.events)){A.events=A.events()}return A.events}function e(C,E){var B=C.match(u);var D=B[1]+x+E.cid;var A=B[2]||undefined;if(A&&A.indexOf("{{")>-1){A=s(A,E)}return{type:D,selector:A}}function s(A,B){return A.replace(b,function(D,F){var G=F.split(".");var C=B,E;while(E=G.shift()){if(C===B.attrs){C=B.get(E)}else{C=C[E]}}if(i(C)){return C}return p})}function q(A){return A==null||A===undefined}});define("arale/widget/1.1.1/daparser",[],function(d,c){c.parseElement=function(p,n){p=$(p)[0];var q={};if(p.dataset){q=$.extend({},p.dataset)}else{var m=p.attributes;for(var o=0,k=m.length;o<k;o++){var j=m[o];var l=j.name;if(l.indexOf("data-")===0){l=f(l.substring(5));q[l]=j.value}}}return n===true?q:e(q)};var a=/-([a-z])/g;var h=/^\s*[\[{].*[\]}]\s*$/;var g=this.JSON?JSON.parse:$.parseJSON;function f(i){return i.toLowerCase().replace(a,function(j,k){return(k+"").toUpperCase()})}function e(j){for(var i in j){if(j.hasOwnProperty(i)){var k=j[i];if(typeof k!=="string"){continue}if(h.test(k)){k=k.replace(/'/g,'"');j[i]=e(g(k))}else{j[i]=b(k)}}}return j}function b(j){if(j.toLowerCase()==="false"){j=false}else{if(j.toLowerCase()==="true"){j=true}else{if(/\d/.test(j)&&/[^a-z]/i.test(j)){var i=parseFloat(j);if(i+""===j){j=i}}}}return j}});define("arale/widget/1.1.1/auto-render",function(b,a){var c="data-widget-auto-rendered";a.autoRender=function(e){return new this(e).render()};a.autoRenderAll=function(e,h){if(typeof e==="function"){h=e;e=null}e=$(e||document.body);var f=[];var g=[];e.find("[data-widget]").each(function(k,j){if(!a.isDataApiOff(j)){f.push(j.getAttribute("data-widget").toLowerCase());g.push(j)}});if(f.length){seajs.use(f,function(){for(var l=0;l<arguments.length;l++){var m=arguments[l];var k=$(g[l]);if(k.attr(c)){continue}var j={initElement:k,renderType:"auto"};var n=k.attr("data-widget-role");j[n?n:"element"]=k;m.autoRender&&m.autoRender(j);k.attr(c,"true")}h&&h()})}};var d=$(document.body).attr("data-api")==="off";a.isDataApiOff=function(f){var e=$(f).attr("data-api");return e==="off"||e!=="on"&&d}});